/* Icon Picker */
(function($) {

	$.fn.iconPicker = function() {
		var options = ['helpdesk','icon']; // default font set
		var icons;
		$list = $('');
		function font_set() {
			if (options[0] === 'helpdesk') {
				icons = [
					"blank",	// there is no "blank" but we need the option
					"Desktop",
					"Tablet",
					"Document",
					"Documents",
					"Search",
					"Picture",
					"Video2",
					"Camera",
					"Printer2",
					"Toolbox",
					"Briefcase",
					"Grid",
					"Gears2",
					"Attachment",
					"Recycle",
					"Anchor",
					"Happy",
					"Sad",
					"Add-File",
					"Add",
					"Address-Book",
					"Address-Book2",
					"Administrator",
					"Air-Balloon",
					"Airship",
					"Alarm",
					"Align-Center",
					"Align-JustifyAll",
					"Align-JustifyCenter",
					"Android-Store",
					"Android",
					"Archery-2",
					"Arrow-Back3",
					"Arrow-Back",
					"Arrow-Down",
					"Arrow-Down2",
					"Arrow-DowninCircle",
					"Arrow-Forward",
					"Arrow-Forward2",
					"Arrow-Left",
					"Arrow-Left2",
					"Arrow-LeftinCircle",
					"Arrow-Right",
					"Arrow-Right2",
					"Arrow-RightinCircle",
					"Arrow-Up",
					"Arrow-Up2",
					"Arrow-UpinCircle",
					"At-Sign",
					"Audio",
					"Back2",
					"Back-Music",
					"Bakelite",
					"Balloon",
					"Bank",
					"Bar-Chart",
					"Bar-Chart2",
					"Bar-Chart3",
					"Bar-Chart4",
					"Bar-Chart5",
					"Bar-Code",
					"Basket-Ball",
					"Bathrobe",
					"Bell-2",
					"Bell",
					"Betvibes",
					"Big-Data",
					"Billing",
					"Bird-DeliveringLetter",
					"Blackboard",
					"Block-Cloud",
					"Block-Window",
					"Blouse",
					"Bold-Text",
					"Book",
					"Bookmark",
					"Books-2",
					"Books",
					"Boom",
					"Bow-5",
					"Box2",
					"Box-Close",
					"Box-Full",
					"Box-Open",
					"Box-withFolders",
					"Boy",
					"Brush",
					"Bug",
					"Bulleted-List",
					"Business-Man",
					"Business-ManWoman",
					"Business-Mens",
					"Business-Woman",
					"Camera-2",
					"Camera-3",
					"Car-3",
					"Cardiovascular",
					"Cello",
					"Checkout",
					"Chemical-5",
					"Chemical",
					"Chrysler-Building",
					"Circular-Point",
					"Clapperboard-Close",
					"Clapperboard-Close",
					"Clock",
					"Close-Window",
					"Close",
					"Cloud--",
					"Cloud-",
					"Cloud-Secure",
					"Cloud",
					"Clouds",
					"Cocktail",
					"Code-Window",
					"Coding",
					"Coffee-toGo",
					"Coffee",
					"Communication-Tower2",
					"Compass-4",
					"Computer-2",
					"Copyright",
					"Crop-2",
					"Cursor-Click2",
					"Cursor-Move",
					"Cursor-Move2",
					"Cursor",
					"Danger",
					"Dashboard",
					"Data-Backup",
					"Data-Block",
					"Data-Center",
					"Data-Clock",
					"Data-Cloud",
					"Data-Storage",
					"Data-Yes",
					"Data",
					"Daylight",
					"Delete-File",
					"Delete-Window",
					"Depression",
					"Disk",
					"Doctor",
					"Dollar-Sign",
					"Dollar-Sign2",
					"Down-4",
					"Down",
					"Download-2",
					"Download-fromCloud",
					"Download-Window",
					"Download",
					"Drill",
					"Drop",
					"Dropbox",
					"Dry",
					"Dumbbell",
					"Electric-Guitar",
					"Email",
					"Empire-StateBuilding",
					"Empty-Box",
					"Envelope-2",
					"Envelope",
					"Environmental",
					"Equalizer",
					"Eraser-3",
					"Eraser",
					"Euro-Sign",
					"Euro-Sign2",
					"Eye-2",
					"Eye",
					"Facebook-2",
					"Facebook",
					"Factory-2",
					"Factory",
					"Fahrenheit",
					"Fashion",
					"Favorite-Window",
					"Female",
					"File-Block",
					"File-Bookmark",
					"File-Cloud",
					"File-CSV",
					"File-Download",
					"File-Edit",
					"File-Excel",
					"File-Favorite",
					"File-HTML",
					"File-JPG",
					"File-Link",
					"File-Loading",
					"File-Lock",
					"File-Love",
					"File-Music",
					"File-Network",
					"File-Pictures",
					"File-Pie",
					"File-Presentation",
					"File-Search",
					"File-TextImage",
					"File-Trash",
					"File-TXT",
					"File-Upload",
					"File-Video",
					"File-Word",
					"File-Zip",
					"File",
					"Files",
					"Film-Board",
					"Film-Video",
					"Film",
					"Filter-2",
					"Fire-Flame",
					"Firewall",
					"First-Aid",
					"Fit-To",
					"Fit-To2",
					"Five-Fingers",
					"Flag-2",
					"Flag-3",
					"Flag-5",
					"Flag-6",
					"Flash-2",
					"Flash",
					"Flask",
					"Folder-Add",
					"Folder-Archive",
					"Folder-Bookmark",
					"Folder-Close",
					"Folder-Cloud",
					"Folder-Download",
					"Folder-Edit",
					"Folder-Favorite",
					"Folder-Lock",
					"Folder-Love",
					"Folder-Music",
					"Folder-Open",
					"Folder-Open2",
					"Folder-Organizing",
					"Folder-Pictures",
					"Folder-Remove-",
					"Folder-Search",
					"Folder-Trash",
					"Folder-Zip",
					"Folder",
					"Folders",
					"Font-Name",
					"Full-Basket",
					"Full-Cart",
					"Full-Screen",
					"Full-Screen2",
					"Gamepad-2",
					"Gas-Pump",
					"Gaugage-2",
					"Gaugage",
					"Gear-2",
					"Gear",
					"Gears-2",
					"Gears",
					"Geo--",
					"Geo-",
					"Geo-Close",
					"Geo-Star",
					"Geo",
					"Geo2--",
					"Geo2-",
					"Geo2-Close",
					"Geo2-Star",
					"Geo2",
					"Geo3-Star",
					"Geo3",
					"Gift-Box",
					"Girl",
					"Glasses-3",
					"Globe-2",
					"Globe",
					"Google-Drive",
					"Google-Play",
					"Google-Plus",
					"Google",
					"Green-House",
					"Guitar",
					"Gun",
					"Halloween-HalfMoon",
					"Hammer",
					"HD-Video",
					"HD",
					"Heart-2",
					"Heart",
					"Helicopter",
					"Hokey",
					"Home-2",
					"Home",
					"Hub",
					"Idea-5",
					"Inbox-Empty",
					"Inifity",
					"Instagram",
					"Italic-Text",
					"Jet",
					"Key-3",
					"Key",
					"Keyboard3",
					"Knight",
					"Landscape-2",
					"Laptop-2",
					"Laptop-Phone",
					"Laptop",
					"Last-FM",
					"Layer-1635",
					"Layer-1646",
					"Leafs-2",
					"Leafs",
					"Left-4",
					"Letter-Open",
					"Library-2",
					"Life-Safer",
					"Light-Bulb",
					"Like-2",
					"Like",
					"Line-Chart",
					"Line-Chart3",
					"Link-2",
					"Linkedin-2",
					"Lock-2",
					"Lock",
					"Loudspeaker",
					"Magnet",
					"Magnifi-Glass-",
					"Magnifi-Glass",
					"Magnifi-Glass2",
					"Mail-2",
					"Mail",
					"Mailbox-Empty",
					"Male",
					"Map",
					"Map2",
					"Marker-3",
					"Marker",
					"Martini-Glass",
					"Medal-2",
					"Medal-3",
					"Medicine-3",
					"Memory-Card",
					"Memory-Card3",
					"Microphone-2",
					"Microphone-4",
					"Microphone",
					"Mixer",
					"Monitor-2",
					"Monitor-5",
					"Monitor-phone",
					"Mouse-2",
					"Mp3-File",
					"Music-Note2",
					"Next2",
					"Next-Music",
					"Next",
					"Normal-Text",
					"Numbering-List",
					"Office",
					"Old-Camera",
					"Old-Telephone",
					"On-off",
					"One-Finger",
					"Open-Book",
					"Paint-Brush",
					"Pantheon",
					"Paper-Plane",
					"Paper",
					"Pen-2",
					"Pen-3",
					"Pen-4",
					"Pen-5",
					"Pen",
					"Petrol",
					"Phone",
					"Photo",
					"Picasa",
					"Play-Music",
					"Plug-In",
					"Post-Sign",
					"Pound-Sign",
					"Pound-Sign2",
					"Power-3",
					"Power",
					"Previous",
					"Pricing",
					"Printer",
					"Pulse",
					"Quill-2",
					"Quill-3",
					"Record2",
					"Recycling-2",
					"Remove-File",
					"Remove",
					"Repeat-2",
					"Reverbnation",
					"Ribbon-2",
					"Right",
					"RSS",
					"Ruler-2",
					"Ruler",
					"Sharethis",
					"Shopping-Basket",
					"Shopping-Cart",
					"Shutter",
					"Skype",
					"Smartphone-2",
					"Smartphone-3",
					"Smartphone-4",
					"Smile",
					"Sound",
					"Soundcloud",
					"Speach-Bubble",
					"Speach-Bubble2",
					"Speach-Bubble3",
					"Speach-Bubble4",
					"Speach-Bubble5",
					"Speach-Bubble6",
					"Speach-Bubble13",
					"Speaker-2",
					"Speaker",
					"Split-Vertical",
					"SSL",
					"Stamp-2",
					"Star",
					"Start",
					"stop--2",
					"Student-Female",
					"Student-Hat2",
					"Sum",
					"Sun",
					"T-Shirt",
					"Tablet-2",
					"Tag-2",
					"Tag-3",
					"Tag",
					"Temperature-3",
					"Tennis-Ball",
					"Three-Fingers",
					"Trash-withMen",
					"Tree-5",
					"Trophy",
					"Tumblr",
					"Twitter-2",
					"Twitter",
					"University-2",
					"Up-4",
					"Up",
					"Upload-2",
					"Upload-toCloud",
					"Upload",
					"Vest-2",
					"Video-3",
					"Video-4",
					"Video-5",
					"Video-Photographer",
					"Video",
					"Vimeo",
					"Visa",
					"Wallet-2",
					"Wordpress",
					"Wrench",
					"Yes",
				]; 
				options[1] = 'icon';
			} 
	}
	font_set();

	function build_list($popup,$button,clear) {
	  $list = $popup.find('.icon-picker-list');
	  if (clear===1) { $list.empty(); // clear list //
	  }
	  for (var i in icons) {
		  $list.append('<li data-icon="'+icons[i]+'"><a href="#" title="'+icons[i]+'"><span class="'+options[0]+' '+options[1]+'-'+icons[i]+'"></span></a></li>');
	  }
				$('a', $list).click(function(e) {
					e.preventDefault();
					var title = $(this).attr("title");
					$target.val(options[0]+"|"+options[1]+"-"+title);
					$button.removeClass().addClass("button icon-picker "+options[0]+" "+options[1]+"-"+title);
					removePopup();
				});
	}
	
			function removePopup(){
				$(".icon-picker-container").remove();
			}
	

			$button = $('.icon-picker');
			$button.each( function() {
				$(this).on('click.iconPicker', function() {
					createPopup($(this));
				});
			});


			function createPopup($button) {
				$target = $($button.data('target'));
				/*jshint multistr: true */
				$popup = $('<div class="icon-picker-container"> \
						<div class="icon-picker-control" /> \
						<ul class="icon-picker-list" /> \
					</div>')
					.css({
						'top': $button.offset().top,
						'left': $button.offset().left
					});
				build_list($popup,$button,0);
				var $control = $popup.find('.icon-picker-control');
				$control.html('<a data-direction="back" href="#"><span class="dashicons dashicons-arrow-left-alt2"></span></a> '+
				'<input type="text" class="" placeholder="Search" />'+
				'<a data-direction="forward" href="#"><span class="dashicons dashicons-arrow-right-alt2"></span></a>'+
				'');

				$('a', $control).click(function(e) {
					e.preventDefault();
					if ($(this).data('direction') === 'back') {
						//move last 25 elements to front
						$('li:gt(' + (icons.length - 26) + ')', $list).each(function() {
							$(this).prependTo($list);
						});
					} else {
						//move first 25 elements to the end
						$('li:lt(25)', $list).each(function() {
							$(this).appendTo($list);
						});
					}
				});

				$popup.appendTo('body').show();

				$('input', $control).on('keyup', function(e) {
					var search = $(this).val();
					if (search === '') {
						//show all again
						$('li:lt(25)', $list).show();
					} else {
						$('li', $list).each(function() {
							if ($(this).data('icon').toString().toLowerCase().indexOf(search.toLowerCase()) !== -1) {
								$(this).show();
							} else {
								$(this).hide();
							}
						});
					}
				});



				$(document).mouseup(function (e){
					if (!$popup.is(e.target) && $popup.has(e.target).length === 0) {
						removePopup();
					}
				});
			}
	};


	$(function() {
		$('.icon-picker').iconPicker();
	});

}(jQuery));
